<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:SDAHymns.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="SDAHymns.Desktop.Views.DisplayWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="SDA Hymns - Display"
        Background="Black"
        WindowState="Normal"
        CanResize="True">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <!-- Clean projection display - just the content -->
    <Viewbox Stretch="Uniform">
        <Border x:Name="RootBorder"
                Width="{Binding DisplayWidth}"
                Height="{Binding DisplayHeight}"
                Background="Black">
            <Grid>
                <!-- Title Slide (separate slide, just the title) -->
                <Border x:Name="TitleBorder"
                        Background="Black"
                        Padding="40,30"
                        IsVisible="{Binding ShowTitleSlide}">
                    <Viewbox Stretch="Uniform">
                        <TextBlock x:Name="HymnTitleText"
                                   Text="{Binding HymnTitle}"
                                   Width="1200"
                                   FontSize="72"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   TextAlignment="Center"
                                   Foreground="White"
                                   TextWrapping="Wrap"/>
                    </Viewbox>
                </Border>

                <!-- Verse Content (shown when NOT on title slide or ending slide) -->
                <Viewbox Stretch="Uniform" StretchDirection="DownOnly" IsVisible="{Binding ShowVerseContent}">
                    <StackPanel x:Name="ContentPanel"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left"
                               Width="1200"
                               Margin="100,60,100,60">
                        <!-- Verse Number/Label Container -->
                        <StackPanel x:Name="VerseLabelContainer" Orientation="Horizontal" Margin="0,0,0,40">
                            <!-- Badge Style -->
                            <Border x:Name="VerseLabelBadge"
                                    Background="#6366F1"
                                    CornerRadius="8"
                                    Padding="20,10"
                                    Margin="0,0,20,0"
                                    IsVisible="False">
                                <TextBlock x:Name="VerseLabelBadgeText"
                                          Text="{Binding CurrentVerseLabel}"
                                          FontSize="32"
                                          FontWeight="Bold"
                                          Foreground="White"/>
                            </Border>

                            <!-- Inline/Normal Style -->
                            <TextBlock x:Name="VerseLabelText"
                                      Text="{Binding CurrentVerseLabel}"
                                      FontSize="32"
                                      FontWeight="SemiBold"
                                      HorizontalAlignment="Left"
                                      Foreground="#CCCCCC"
                                      IsVisible="True"/>
                        </StackPanel>

                        <!-- Verse Content (with chorus styling support) -->
                        <Border x:Name="ChorusBackground"
                                Background="Transparent"
                                CornerRadius="8"
                                Padding="0">
                            <TextBlock x:Name="VerseContentText"
                                      Text="{Binding CurrentVerseContent}"
                                      FontSize="56"
                                      TextWrapping="Wrap"
                                      TextAlignment="Left"
                                      LineHeight="75"
                                      Foreground="White"/>
                        </Border>
                    </StackPanel>
                </Viewbox>

                <!-- Black Ending Slide (completely blank) -->
                <Border Background="Black" IsVisible="{Binding IsOnEndingSlide}">
                    <!-- Intentionally empty - just a black screen -->
                </Border>

                <!-- Auto-Play Countdown Overlay -->
                <Border Background="#CC000000"
                        IsVisible="{Binding IsCountdownActive}">
                    <StackPanel VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Spacing="30">
                        <TextBlock Text="Starting audio in..."
                                   FontSize="48"
                                   FontWeight="SemiBold"
                                   HorizontalAlignment="Center"
                                   Foreground="White"/>
                        <TextBlock Text="{Binding CountdownSeconds}"
                                   FontSize="120"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   Foreground="#4CAF50"/>
                        <Button Content="Cancel"
                                Command="{Binding CancelCountdownCommand}"
                                HorizontalAlignment="Center"
                                FontSize="24"
                                Padding="40,15"
                                Background="#C62828"
                                Foreground="White"
                                BorderBrush="#8B0000"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Viewbox>
</Window>
